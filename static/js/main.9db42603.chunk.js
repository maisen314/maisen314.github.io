(this["webpackJsonpjoke.calender"]=this["webpackJsonpjoke.calender"]||[]).push([[0],[,,,function(e){e.exports=JSON.parse('{"FIREBASE_URL":"https://adventofjokes-default-rtdb.europe-west1.firebasedatabase.app/2023"}')},,function(e,t,n){e.exports={navbar:"Hamburger_navbar__21JeB",navbranding:"Hamburger_navbranding__2JFfS",navmenu:"Hamburger_navmenu__2JUuE",navlink:"Hamburger_navlink__1PrJC",hamburger:"Hamburger_hamburger__36Un3",bar:"Hamburger_bar__1W2Nz",active:"Hamburger_active__2aKt6",navitem:"Hamburger_navitem__2Zqz7"}},function(e,t,n){e.exports={form:"ResponseForm_form__1VFJw",control:"ResponseForm_control__jRjwf",actions:"ResponseForm_actions__1-bhU",lenke:"ResponseForm_lenke__2srQj",question:"ResponseForm_question__1dZcV"}},,,,,function(e,t,n){e.exports={main:"App_main__uN9ca"}},function(e,t,n){e.exports={card:"Card_card__3K4pi"}},function(e,t,n){e.exports={ThankYouPage:"ThankYouPage_ThankYouPage__3PRoL"}},function(e,t,n){e.exports={secretlink:"AddUser_secretlink__3HNu_"}},function(e,t,n){e.exports={admin:"Admin_admin__2rWz7"}},,,function(e,t,n){"use strict";n.r(t);var c=n(2),r=n(11),s=n.n(r),a=n(4),i=n(1),o=n(12),j=n.n(o),u=n(0);var d=function(e){return Object(u.jsx)("div",{className:j.a.card,children:e.children})},l=n(3);var b=function(){var e=Object(i.useState)({}),t=Object(a.a)(e,2),n=t[0],c=t[1];Object(i.useEffect)((function(){fetch("".concat(l.FIREBASE_URL,"score.json")).then((function(e){return null===e||void 0===e?void 0:e.json()})).then((function(e){e&&c(e)}))}),[]);var r=[];for(var s in n)r.push([s,n[s]]);return r.sort((function(e,t){return t[1]-e[1]})),Object(u.jsx)("div",{children:Object(u.jsxs)(d,{children:[Object(u.jsx)("h2",{children:"Highscore"}),r!==[]&&Object(u.jsx)("table",{children:Object(u.jsx)("tbody",{children:r.map((function(e,t){return Object(u.jsxs)("tr",{children:[Object(u.jsx)("td",{children:e[0]}),Object(u.jsx)("td",{children:e[1]})]},e[0])}))})})]})})},h=n(6),O=n.n(h),f=n(7),v=n.p+"static/media/advent1.4314d18d.png",m=n.p+"static/media/advent2.53ffb9fb.png",x=n.p+"static/media/3desember.84ebc20f.jpeg",p=n.p+"static/media/4desember.a4f126d3.jpeg";var g=function(e){var t=Object(i.useRef)(),n=Object(i.useRef)(),c=Object(i.useRef)(),r=Object(i.useRef)(),s=Object(i.useState)(""),o=Object(a.a)(s,2),j=o[0],b=o[1],h=Object(i.useState)(""),g=Object(a.a)(h,2),S=g[0],_=g[1],R=Object(i.useState)(""),k=Object(a.a)(R,2),y=k[0],E=k[1],N=new Date,q=N.getDate().toString(),w=N<=(new Date).setDate(24);function A(e){return"Rebus1"===y?Object(u.jsx)("div",{id:"question",ref:r,children:Object(u.jsx)("img",{alt:"rebus 1",src:v,width:"100%"})}):"Rebus2"===y?Object(u.jsx)("div",{id:"question",ref:r,children:Object(u.jsx)("img",{alt:"rebus 2",src:m,width:"100%"})}):"Rebus3"===y?Object(u.jsx)("div",{id:"question",ref:r,children:Object(u.jsx)("img",{alt:"rebus 3",src:x,width:"100%"})}):"Rebus4"===y?Object(u.jsx)("div",{id:"question",ref:r,children:Object(u.jsx)("img",{alt:"rebus 4",src:p,width:"100%"})}):Object(u.jsx)("div",{className:O.a.question,id:"question",ref:r,children:y})}return Object(i.useEffect)((function(){var e;e=q,fetch("".concat(l.FIREBASE_URL,"openedDoors/").concat(e,"/question.json")).then((function(e){return null===e||void 0===e?void 0:e.json()})).then((function(t){if(t){var n=Object.keys(t);E(t[n[0]].question)}else fetch("".concat(l.FIREBASE_URL,"doorIds.json")).then((function(e){return null===e||void 0===e?void 0:e.json()})).then((function(t){if(t){var n=Object.keys(t),c=n[Math.floor(Math.random()*n.length)];fetch("".concat(l.FIREBASE_URL,"doorsQ/").concat(c,".json")).then((function(e){return null===e||void 0===e?void 0:e.json()})).then((function(t){var n=t[Object.keys(t)[0]].question;E(n),fetch("".concat(l.FIREBASE_URL,"openedDoors/").concat(e,"/question.json"),{method:"POST",body:JSON.stringify({question:n,id:c}),headers:{"Content-Type":"application/json"}})})).then(fetch("".concat(l.FIREBASE_URL,"doorIds/").concat(c,".json"),{method:"DELETE"})).catch((function(e){E(e)}))}else E("Tomt for sp\xf8rsm\xe5l :(")}))})).catch((function(e){return E("Tomt for sp\xf8rsm\xe5l :(")}));var t=JSON.parse(localStorage.getItem("user"));t&&(b(t.pwd),_(t.user))}),[q]),Object(u.jsxs)("div",{children:[w&&Object(u.jsx)(d,{children:Object(u.jsxs)("form",{className:O.a.form,onSubmit:function(s){s.preventDefault();var a={username:t.current.value.toString().trim(),password:n.current.value,answer:c.current.value,question:r.current.value,door:q,submittedAt:new Date};console.log(a),e.onSubmittedDoor(a)},children:[Object(u.jsx)("h2",{children:"Dagens sp\xf8rsm\xe5l"}),Object(u.jsx)(A,{}),Object(u.jsxs)("h3",{children:["Luke ",q]}),Object(u.jsx)("div",{className:O.a.control,children:Object(u.jsx)("textarea",{id:"message",rows:"5",ref:c,placeholder:"Skriv svaret her"})}),Object(u.jsx)("div",{className:O.a.control,children:Object(u.jsx)("input",{type:"text",id:"name",required:!0,ref:t,placeholder:"Brukernavn",value:S,onChange:function(e){return _(e.value)}})}),Object(u.jsx)("div",{className:O.a.control,children:Object(u.jsx)("input",{type:"password",id:"password",required:!0,ref:n,placeholder:"Passord",value:j,onChange:function(e){return b(e.value)}})}),Object(u.jsx)("div",{className:O.a.actions,children:Object(u.jsx)("button",{children:"Send inn"})})]})}),!w&&Object(u.jsxs)("div",{children:[Object(u.jsx)("div",{children:"Advent er over."}),Object(u.jsx)("div",{children:Object(u.jsx)(f.a,{className:O.a.lenke,to:"/tidligere-sp\xf8rsm\xe5l",children:"Du kan se her fram til neste advent"})})]})]})};var S=function(){var e=Object(c.f)();return Object(u.jsx)("div",{children:Object(u.jsx)("section",{children:Object(u.jsx)(g,{onSubmittedDoor:function(t){var n="".concat(t.password).concat(t.username);fetch("".concat(l.FIREBASE_URL,"users/").concat(n,".json")).then((function(e){return null===e||void 0===e?void 0:e.json()})).then((function(n){if(!n)throw new Error("Brukernavn eller passord er feil");!function(t){var n=t.door,c={user:t.username,pwd:t.password};localStorage.setItem("user",JSON.stringify(c)),fetch("".concat(l.FIREBASE_URL,"openedDoors/").concat(n,"/answer.json"),{method:"POST",body:JSON.stringify(t),headers:{"Content-Type":"application/json"}}).then((function(){e("/takk")}))}(t)})).catch((function(e){alert(e.message)}))}})})})},_=n(13),R=n.n(_);var k=function(){return Object(u.jsxs)("div",{className:R.a.ThankYouPage,children:["Lukesvar er notert! ",Object(u.jsx)("br",{}),"H\xe5per det var riktig \ud83e\udd1e"]})};function y(e){var t=e.id,n=e.door,c=Object(i.useState)(!1),r=Object(a.a)(c,2),s=r[0],o=r[1],j=Object(i.useState)({}),b=Object(a.a)(j,2),h=b[0],O=b[1];function f(e){return"Rebus1"===h.question?Object(u.jsx)("div",{id:"question",children:Object(u.jsx)("img",{alt:"rebus 1",src:v,width:"100%"})}):"Rebus2"===h.question?Object(u.jsx)("div",{id:"question",children:Object(u.jsx)("img",{alt:"rebus 2",src:m,width:"100%"})}):"Rebus3"===h.question?Object(u.jsx)("div",{id:"question",children:Object(u.jsx)("img",{alt:"rebus 3",src:x,width:"100%"})}):"Rebus4"===h.question?Object(u.jsx)("div",{id:"question",children:Object(u.jsx)("img",{alt:"rebus 4",src:p,width:"100%"})}):Object(u.jsx)("div",{id:"question",children:h.question})}return Object(i.useEffect)((function(){console.log(t),fetch("".concat(l.FIREBASE_URL,"doorsQnA/").concat(t,".json")).then((function(e){return null===e||void 0===e?void 0:e.json()})).then((function(e){if(e){var t=Object.keys(e.qna);O(e.qna[t[0]])}}))}),[t]),Object(u.jsxs)(d,{children:[Object(u.jsxs)("h2",{children:["Luke ",n]}),Object(u.jsx)(f,{}),s&&Object(u.jsx)("div",{children:h.answer}),Object(u.jsx)("button",{onClick:function(){return o(!s)},children:s?"Skjul svar":"Vis svar"})]},t)}var E=function(){var e=Object(i.useState)([]),t=Object(a.a)(e,2),n=t[0],c=t[1];return Object(i.useEffect)((function(){fetch("".concat(l.FIREBASE_URL,"openedDoors.json")).then((function(e){return null===e||void 0===e?void 0:e.json()})).then((function(e){if(e){console.log(e);var t=e.filter((function(e){return e}));t.pop();var n=Object.keys(t).map((function(e){return{question:t[e].question,door:parseInt(e)+1}})).map((function(e){var t=Object.keys(e.question);return{id:e.question[t[0]].id,door:e.door}}));c(n.reverse())}}))}),[]),n.map((function(e){return Object(u.jsx)(y,{id:e.id,door:e.door},e.id)}))};var N=function(e){var t=Object(i.useRef)(),n=Object(i.useRef)();return Object(u.jsx)(d,{children:Object(u.jsxs)("form",{className:O.a.form,onSubmit:function(c){c.preventDefault();var r,s={username:t.current.value,password:n.current.value,submittedAt:new Date};try{r=s,fetch("".concat(l.FIREBASE_URL,"users/username.json")).then((function(e){return null===e||void 0===e?void 0:e.json()})).then((function(t){return t&&Object.keys(t).forEach((function(e){var n;if((null===(n=t[e])||void 0===n?void 0:n.username)===r.username)throw new Error("Brukernavnet er opptatt")})),e.onAddedUser(r)})).catch((function(e){return document.getElementById("error").innerHTML=e.message}))}catch(a){console.log(a)}},children:[Object(u.jsx)("h3",{children:"Velg brukernavn og passord"}),Object(u.jsx)("div",{className:O.a.control,children:Object(u.jsx)("input",{type:"text",id:"name",required:!0,ref:t,placeholder:"Brukernavn"})}),Object(u.jsx)("div",{className:O.a.control,children:Object(u.jsx)("input",{type:"password",id:"password",required:!0,ref:n,placeholder:"Passord"})}),Object(u.jsx)("div",{id:"error",children:" "}),Object(u.jsx)("div",{className:O.a.actions,children:Object(u.jsx)("button",{children:"Send inn"})})]})})},q=n(14),w=n.n(q);var A=function(){var e=Object(c.f)();return Object(u.jsxs)("div",{children:[Object(u.jsx)("section",{children:Object(u.jsx)(N,{onAddedUser:function(t){var n;!function(e){var t="".concat(e.password).concat(e.username);fetch("".concat(l.FIREBASE_URL,"users/").concat(t,".json"),{method:"POST",body:JSON.stringify(e),headers:{"Content-Type":"application/json"}})}(t),n={username:t.username,submittedAt:t.submittedAt},fetch("".concat(l.FIREBASE_URL,"users/username.json"),{method:"POST",body:JSON.stringify(n),headers:{"Content-Type":"application/json"}}).then((function(){return e("/takk")}))}})}),Object(u.jsx)(f.a,{to:"/admin",className:w.a.secretlink,children:"."})]})},F=n(15),I=n.n(F);var L=function(){var e=Object(i.useRef)(),t=Object(i.useRef)(),n=Object(i.useRef)(),c=Object(i.useState)(!1),r=Object(a.a)(c,2),s=r[0],o=r[1],j=Object(i.useState)(!1),d=Object(a.a)(j,2),b=d[0],h=d[1],O=Object(i.useState)(""),f=Object(a.a)(O,2),v=f[0],m=f[1],x=Object(i.useState)({}),p=Object(a.a)(x,2),g=p[0],S=p[1],_=Object(i.useState)({}),R=Object(a.a)(_,2),k=R[0],y=R[1],E=Object(i.useState)({}),N=Object(a.a)(E,2),q=N[0],w=N[1];function A(n){n.preventDefault();var c=e.current.value,r=t.current.value;o("sjef"===c&&"sjef1"===r)}function F(e,t){var n=q[e];"+"===t?n++:n--,q[e]=n,w(q),h(!b)}function L(e){e.preventDefault();var t=n.current.value;m(t)}function B(e){e.preventDefault(),fetch("".concat(l.FIREBASE_URL,"score.json"),{method:"PATCH",body:JSON.stringify(q),headers:{"Content-Type":"application/json"}})}function U(){return Object(u.jsxs)("form",{onSubmit:A,children:[Object(u.jsx)("input",{type:"text",ref:e}),Object(u.jsx)("input",{type:"password",ref:t}),Object(u.jsx)("button",{children:"pr\xf8v"})]})}function T(){var e=Object.keys(q);return Object(u.jsxs)("div",{className:I.a.admin,children:[Object(u.jsxs)("form",{onSubmit:L,children:[Object(u.jsx)("input",{type:"text",ref:n}),Object(u.jsx)("div",{children:"Sp\xf8rsm\xe5l"}),Object(u.jsx)("pre",{id:"questionP",children:JSON.stringify(g,null,2)}),Object(u.jsx)("pre",{id:"answers",children:JSON.stringify(k,null,2)}),Object(u.jsx)("button",{children:"butt"})]}),Object(u.jsxs)("form",{onSubmit:B,children:[Object(u.jsx)("table",{children:Object(u.jsx)("tbody",{children:e.map((function(e){return Object(u.jsxs)("tr",{children:[Object(u.jsxs)("td",{children:[e," ",q[e]," "]}),Object(u.jsxs)("td",{children:[Object(u.jsx)("button",{onClick:function(){return F(e,"+")},children:"+1"}),Object(u.jsx)("button",{onClick:function(){return F(e,"-")},children:"-1"})]})]},e)}))})}),Object(u.jsx)("button",{children:"Oppdater"})]})]})}return Object(i.useEffect)((function(){fetch("".concat(l.FIREBASE_URL,"score.json")).then((function(e){return null===e||void 0===e?void 0:e.json()})).then((function(e){w(e)}))}),[]),Object(i.useEffect)((function(){""!==v&&fetch("".concat(l.FIREBASE_URL,"openedDoors/").concat(v,".json")).then((function(e){return null===e||void 0===e?void 0:e.json()})).then((function(e){y(e.answer);var t=Object.keys(e.question),n=e.question[t[0]].id;fetch("".concat(l.FIREBASE_URL,"doorsQnA/").concat(n,".json")).then((function(e){return null===e||void 0===e?void 0:e.json()})).then((function(e){if(e){var t=Object.keys(e.qna);S(e.qna[t[0]])}}))}))}),[v]),Object(u.jsxs)("div",{children:[!s&&Object(u.jsx)(U,{}),s&&Object(u.jsx)(T,{})]})};var B=function(e){var t=Object(i.useRef)(),n=Object(i.useRef)();return Object(u.jsx)(d,{children:Object(u.jsxs)("form",{className:O.a.form,onSubmit:function(c){c.preventDefault();var r={id:Math.floor(1e4*Math.random()),question:t.current.value,answer:n.current.value,submittedAt:new Date};try{e.onAddedQnA(r)}catch(s){console.log(s)}},children:[Object(u.jsx)("h3",{children:"Legg inn en ny luke"}),Object(u.jsx)("div",{className:O.a.control,children:Object(u.jsx)("textarea",{type:"text",id:"question",required:!0,rows:"5",ref:t,placeholder:"Sp\xf8rsm\xe5l"})}),Object(u.jsx)("div",{className:O.a.control,children:Object(u.jsx)("textarea",{type:"text",id:"answer",rows:"5",required:!0,ref:n,placeholder:"Svar"})}),Object(u.jsx)("div",{id:"error",children:" "}),Object(u.jsx)("div",{className:O.a.actions,children:Object(u.jsx)("button",{children:"Send inn"})})]})})};var U=function(){var e=Object(c.f)();return Object(u.jsx)("div",{children:Object(u.jsx)("section",{children:Object(u.jsx)(B,{onAddedQnA:function(t){fetch("".concat(l.FIREBASE_URL,"doorsQnA/").concat(t.id,"/qna.json"),{method:"POST",body:JSON.stringify(t),headers:{"Content-Type":"application/json"}}).then(fetch("".concat(l.FIREBASE_URL,"doorsQ/").concat(t.id,".json"),{method:"POST",body:JSON.stringify({question:t.question}),headers:{"Content-Type":"application/json"}})).then(fetch("".concat(l.FIREBASE_URL,"doorIds/").concat(t.id,".json"),{method:"POST",body:JSON.stringify(t.id),headers:{"Content-Type":"application/json"}})).then(e("/takk"))}})})})},T=n(5),D=n.n(T);var C=function(){var e=Object(i.useState)(D.a.hamburger),t=Object(a.a)(e,2),n=t[0],c=t[1],r=Object(i.useState)(D.a.navmenu),s=Object(a.a)(r,2),o=s[0],j=s[1],d=Object(i.useState)(!1),l=Object(a.a)(d,2),b=l[0],h=l[1];function O(){b?(c(D.a.hamburger),j(D.a.navmenu),h(!1)):(c(D.a.hamburger+" "+D.a.active),j(D.a.navmenu+" "+D.a.active),h(!0))}return Object(u.jsx)("header",{children:Object(u.jsxs)("nav",{className:D.a.navbar,children:[Object(u.jsx)(f.a,{className:D.a.navbranding,to:"/",children:"Vitsekalender"}),Object(u.jsxs)("ul",{className:o,children:[Object(u.jsx)("li",{className:D.a.navitem,children:Object(u.jsx)(f.a,{to:"/highscore",onClick:function(){return O()},children:"Highscore"})}),Object(u.jsx)("li",{className:D.a.navitem,children:Object(u.jsx)(f.a,{to:"/",onClick:function(){return O()},children:"Dagens luke"})}),Object(u.jsx)("li",{className:D.a.navitem,children:Object(u.jsx)(f.a,{to:"/tidligere-luker",onClick:function(){return O()},children:"Tidligere luker"})}),Object(u.jsx)("li",{className:D.a.navitem,children:Object(u.jsx)(f.a,{to:"/legg-til-luke",onClick:function(){return O()},children:"Nytt sp\xf8rsm\xe5l"})}),Object(u.jsx)("li",{className:D.a.navitem,children:Object(u.jsx)(f.a,{to:"/ny-bruker",onClick:function(){return O()},children:"Ny bruker"})})]}),Object(u.jsxs)("div",{className:n,onClick:function(){return O()},children:[Object(u.jsx)("span",{className:D.a.bar}),Object(u.jsx)("span",{className:D.a.bar}),Object(u.jsx)("span",{className:D.a.bar})]})]})})};t.default=function(){return Object(u.jsxs)("div",{className:s.a.main,id:"main",children:[Object(u.jsx)(C,{}),Object(u.jsxs)(c.c,{children:[Object(u.jsx)(c.a,{path:"/",exact:!0,element:Object(u.jsx)(S,{})}),Object(u.jsx)(c.a,{path:"/highscore",exact:!0,element:Object(u.jsx)(b,{})}),Object(u.jsx)(c.a,{path:"/takk",element:Object(u.jsx)(k,{})}),Object(u.jsx)(c.a,{path:"/tidligere-luker",element:Object(u.jsx)(E,{})}),Object(u.jsx)(c.a,{path:"/ny-bruker",element:Object(u.jsx)(A,{})}),Object(u.jsx)(c.a,{path:"/legg-til-luke",element:Object(u.jsx)(U,{})}),Object(u.jsx)(c.a,{path:"/admin",element:Object(u.jsx)(L,{})})]})]})}}],[[18,1,2]]]);
//# sourceMappingURL=main.9db42603.chunk.js.map