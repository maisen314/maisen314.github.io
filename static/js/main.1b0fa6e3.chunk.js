(this["webpackJsonpjoke.calender"]=this["webpackJsonpjoke.calender"]||[]).push([[0],[,,,function(e){e.exports=JSON.parse('{"FIREBASE_URL":"https://adventofjokes-default-rtdb.europe-west1.firebasedatabase.app/test2023/"}')},,function(e,t,n){e.exports={navbar:"Hamburger_navbar__21JeB",navbranding:"Hamburger_navbranding__2JFfS",navmenu:"Hamburger_navmenu__2JUuE",navlink:"Hamburger_navlink__1PrJC",hamburger:"Hamburger_hamburger__36Un3",bar:"Hamburger_bar__1W2Nz",active:"Hamburger_active__2aKt6",navitem:"Hamburger_navitem__2Zqz7"}},function(e,t,n){e.exports={form:"ResponseForm_form__1VFJw",control:"ResponseForm_control__jRjwf",actions:"ResponseForm_actions__1-bhU",lenke:"ResponseForm_lenke__2srQj",question:"ResponseForm_question__1dZcV"}},,,,,,function(e,t,n){e.exports={main:"App_main__uN9ca"}},function(e,t,n){e.exports={card:"Card_card__3K4pi"}},function(e,t,n){e.exports={countDown:"CountDown_countDown__bCVze"}},function(e,t,n){e.exports={ThankYouPage:"ThankYouPage_ThankYouPage__3PRoL"}},function(e,t,n){e.exports={secretlink:"AddUser_secretlink__3HNu_"}},,,,,,function(e,t,n){e.exports={admin:"Admin_admin__2rWz7"}},function(e,t,n){"use strict";n.r(t);var c=n(1),r=n(11),s=n.n(r),o=n(2),a=n(12),i=n.n(a),u=n(4),j=n(13),d=n.n(j),l=n(0);var b=function(e){return Object(l.jsx)("div",{className:d.a.card,children:e.children})},h=n(3);var O=function(){var e=Object(c.useState)({}),t=Object(u.a)(e,2),n=t[0],r=t[1];Object(c.useEffect)((function(){fetch("".concat(h.FIREBASE_URL,"score.json")).then((function(e){return null===e||void 0===e?void 0:e.json()})).then((function(e){e&&r(e)}))}),[]);var s=[];for(var o in n)s.push([o,n[o]]);return s.sort((function(e,t){return t[1]-e[1]})),Object(l.jsx)("div",{children:Object(l.jsxs)(b,{children:[Object(l.jsx)("h2",{children:"Highscore"}),s!==[]&&Object(l.jsx)("table",{children:Object(l.jsx)("tbody",{children:s.map((function(e,t){return Object(l.jsxs)("tr",{children:[Object(l.jsx)("td",{children:e[0]}),Object(l.jsx)("td",{children:e[1]})]},e[0])}))})})]})})},f=n(6),m=n.n(f),v=n.p+"static/media/advent1.4314d18d.png",x=n.p+"static/media/advent2.53ffb9fb.png",p=n.p+"static/media/3desember.84ebc20f.jpeg",g=n.p+"static/media/4desember.a4f126d3.jpeg",S=n(14),_=n.n(S);function R(e){return(e<10?"0":"")+e}function E(){var e=new Date(2023,11,1,0,0,0).getTime()-(new Date).getTime(),t=Math.floor(e/36e5%24),n=Math.floor(e/6e4%60),c=Math.floor(e/1e3%60);return e>0?{days:Math.floor(e/864e5),hours:R(t),minutes:R(n),seconds:R(c)}:{days:0,hours:0,minutes:0,seconds:0}}function k(){var e=Object(c.useState)(E()),t=Object(u.a)(e,2),n=t[0],r=t[1];return Object(c.useEffect)((function(){var e=setTimeout((function(){r(E())}),1e3);return function(){return clearTimeout(e)}})),Object(l.jsxs)("div",{className:_.a.countDown,children:[n.days," dager ",n.hours," timer ",n.minutes," minutter og ",n.seconds," sekunder"]})}var w=function(e){var t=Object(c.useRef)(),n=Object(c.useRef)(),r=Object(c.useRef)(),s=Object(c.useRef)(),o=Object(c.useState)(""),a=Object(u.a)(o,2),i=a[0],j=a[1],d=Object(c.useState)(""),O=Object(u.a)(d,2),f=O[0],S=O[1],_=Object(c.useState)(""),R=Object(u.a)(_,2),E=R[0],w=R[1],y=new Date,N=y.getDate().toString(),q=y<=(new Date).setDate(24);function A(e){return"Rebus1"===E?Object(l.jsx)("div",{id:"question",ref:s,children:Object(l.jsx)("img",{alt:"rebus 1",src:v,width:"100%"})}):"Rebus2"===E?Object(l.jsx)("div",{id:"question",ref:s,children:Object(l.jsx)("img",{alt:"rebus 2",src:x,width:"100%"})}):"Rebus3"===E?Object(l.jsx)("div",{id:"question",ref:s,children:Object(l.jsx)("img",{alt:"rebus 3",src:p,width:"100%"})}):"Rebus4"===E?Object(l.jsx)("div",{id:"question",ref:s,children:Object(l.jsx)("img",{alt:"rebus 4",src:g,width:"100%"})}):Object(l.jsx)("div",{className:m.a.question,id:"question",ref:s,children:E})}return Object(c.useEffect)((function(){var e;e=N,fetch("".concat(h.FIREBASE_URL,"openedDoors/").concat(e,"/question.json")).then((function(e){return null===e||void 0===e?void 0:e.json()})).then((function(t){if(t){var n=Object.keys(t);w(t[n[0]].question)}else fetch("".concat(h.FIREBASE_URL,"doorIds.json")).then((function(e){return null===e||void 0===e?void 0:e.json()})).then((function(t){if(t){var n=Object.keys(t),c=n[Math.floor(Math.random()*n.length)];fetch("".concat(h.FIREBASE_URL,"doorsQ/").concat(c,".json")).then((function(e){return null===e||void 0===e?void 0:e.json()})).then((function(t){var n=t[Object.keys(t)[0]];w(n.question),fetch("".concat(h.FIREBASE_URL,"openedDoors/").concat(e,"/question.json"),{method:"POST",body:JSON.stringify({question:n.question,id:c,admin:n.admin}),headers:{"Content-Type":"application/json"}})})).then(fetch("".concat(h.FIREBASE_URL,"doorIds/").concat(c,".json"),{method:"DELETE"})).catch((function(e){w(e)}))}else w("Tomt for sp\xf8rsm\xe5l :(")}))})).catch((function(e){return w("Tomt for sp\xf8rsm\xe5l :(")}));var t=JSON.parse(localStorage.getItem("user"));t&&(j(t.pwd),S(t.user))}),[N]),Object(l.jsxs)("div",{children:[q&&Object(l.jsx)(b,{children:Object(l.jsxs)("form",{className:m.a.form,onSubmit:function(c){c.preventDefault();var s={username:t.current.value.toString().trim(),password:n.current.value,answer:r.current.value,question:E,door:N,submittedAt:new Date};console.log(s),e.onSubmittedDoor(s)},children:[Object(l.jsx)("h2",{children:"Dagens sp\xf8rsm\xe5l"}),Object(l.jsx)(A,{}),Object(l.jsxs)("h3",{children:["Luke ",N]}),Object(l.jsx)("div",{className:m.a.control,children:Object(l.jsx)("textarea",{id:"message",rows:"5",ref:r,placeholder:"Skriv svaret her"})}),Object(l.jsx)("div",{className:m.a.control,children:Object(l.jsx)("input",{type:"text",id:"name",required:!0,ref:t,placeholder:"Brukernavn",value:f,onChange:function(e){return S(e.value)}})}),Object(l.jsx)("div",{className:m.a.control,children:Object(l.jsx)("input",{type:"password",id:"password",required:!0,ref:n,placeholder:"Passord",value:i,onChange:function(e){return j(e.value)}})}),Object(l.jsx)("div",{className:m.a.actions,children:Object(l.jsx)("button",{children:"Send inn"})})]})}),!q&&Object(l.jsx)("div",{children:Object(l.jsx)(k,{})})]})};var y=function(){var e=Object(o.f)();return Object(l.jsx)("div",{children:Object(l.jsx)("section",{children:Object(l.jsx)(w,{onSubmittedDoor:function(t){var n="".concat(t.password).concat(t.username);fetch("".concat(h.FIREBASE_URL,"users/").concat(n,".json")).then((function(e){return null===e||void 0===e?void 0:e.json()})).then((function(n){if(!n)throw new Error("Brukernavn eller passord er feil");!function(t){var n=t.door,c={user:t.username,pwd:t.password};localStorage.setItem("user",JSON.stringify(c)),fetch("".concat(h.FIREBASE_URL,"answers/").concat(n,"/answer.json"),{method:"POST",body:JSON.stringify(t),headers:{"Content-Type":"application/json"}}).then((function(){e("/takk")}))}(t)})).catch((function(e){alert(e.message)}))}})})})},N=n(15),q=n.n(N);var A=function(){return Object(l.jsxs)("div",{className:q.a.ThankYouPage,children:["Lukesvar er notert! ",Object(l.jsx)("br",{}),"H\xe5per det var riktig \ud83e\udd1e"]})},F=n(7);n(22);var B=function(){var e=Object(c.useRef)(),t=Object(c.useRef)(),n=(Object(c.useRef)(),Object(c.useState)(!1)),r=Object(u.a)(n,2),s=r[0],a=r[1],i=Object(c.useState)(!1),j=Object(u.a)(i,2),d=j[0],O=j[1],f=Object(o.g)().doorParam,m=Object(c.useState)(f),v=Object(u.a)(m,2),x=v[0],p=v[1],g=Object(c.useState)({}),S=Object(u.a)(g,2),_=(S[0],S[1],Object(c.useState)([])),R=Object(u.a)(_,2),E=R[0],k=R[1],w=Object(c.useState)(""),y=Object(u.a)(w,2),N=y[0],q=y[1],A=Object(c.useState)(""),F=Object(u.a)(A,2),B=F[0],I=F[1],L=Object(c.useState)({}),T=Object(u.a)(L,2),U=T[0],D=T[1],C=Object(c.useState)({}),P=Object(u.a)(C,2),J=P[0],H=P[1];function M(n){n.preventDefault();var c=e.current.value,r=t.current.value;fetch("".concat(h.FIREBASE_URL,"users/").concat(r).concat(c,".json")).then((function(e){return null===e||void 0===e?void 0:e.json()})).then((function(e){if(!e)throw new Error("nej");if(console.log("user?",c,N),c!==N)throw new Error("nej");a(!0)})).catch((function(e){alert(e.message)}))}function Q(e,t){var n=J[e];"+"===t?n++:n--,console.log(n),console.log(U[e]),J[e]=n,H(J),O(!d)}function V(e){e.preventDefault(),fetch("".concat(h.FIREBASE_URL,"score.json"),{method:"PATCH",body:JSON.stringify(J),headers:{"Content-Type":"application/json"}});var t={admin:N,door:x,oldScore:U,newScore:J,dateTime:new Date};fetch("".concat(h.FIREBASE_URL,"admin.json"),{method:"POST",body:JSON.stringify(t),headers:{"Content-Type":"application/json"}}).then(D(J))}function z(){return Object(l.jsxs)("form",{onSubmit:M,children:[Object(l.jsx)("input",{type:"text",ref:e}),Object(l.jsx)("input",{type:"password",ref:t}),Object(l.jsx)("button",{children:"Logg inn"})]})}function Y(e){var t=e.user,n=e.answer;return Object(l.jsxs)(l.Fragment,{children:[Object(l.jsx)("div",{children:t}),Object(l.jsx)("div",{children:n})]})}function G(e){var t=e.username;return Object(l.jsx)(l.Fragment,{children:Object(l.jsxs)("tr",{children:[Object(l.jsxs)("td",{children:[t,"(",U[t],") ",J[t]," "]}),Object(l.jsxs)("td",{children:[Object(l.jsx)("button",{id:t,onClick:function(){Q(t,"+")},children:"+1"}),Object(l.jsx)("button",{id:t,onClick:function(){Q(t,"-")},children:"-1"})]})]},t)})}function K(){p(f);var e=Object.keys(U);return Object(l.jsxs)(l.Fragment,{children:[Object(l.jsxs)(b,{children:[Object(l.jsxs)("h2",{children:["Admin - luke ",f]}),Object(l.jsx)("div",{children:B}),Object(l.jsx)("div",{children:Object(l.jsx)("ul",{children:E.map((function(e){return Object(l.jsx)("li",{children:Object(l.jsx)(Y,{user:e.user,answer:e.answer})})}))})})]}),Object(l.jsxs)(b,{children:[Object(l.jsx)("h2",{children:"Poeng"}),Object(l.jsxs)("form",{onSubmit:V,children:[Object(l.jsx)("table",{children:Object(l.jsx)("tbody",{children:e.map((function(e){return Object(l.jsx)(G,{username:e})}))})}),Object(l.jsx)("button",{children:"Oppdater"})]})]})]})}return Object(c.useEffect)((function(){fetch("".concat(h.FIREBASE_URL,"score.json")).then((function(e){return null===e||void 0===e?void 0:e.json()})).then((function(e){D(e)}))}),[]),Object(c.useEffect)((function(){fetch("".concat(h.FIREBASE_URL,"score.json")).then((function(e){return null===e||void 0===e?void 0:e.json()})).then((function(e){H(e)}))}),[]),Object(c.useEffect)((function(){fetch("".concat(h.FIREBASE_URL,"openedDoors/").concat(x,".json")).then((function(e){return null===e||void 0===e?void 0:e.json()})).then((function(e){if(e){var t=Object.keys(e.question);q(e.question[t].admin),I(e.question[t].question)}}))}),[]),Object(c.useEffect)((function(){fetch("".concat(h.FIREBASE_URL,"answers/").concat(x,".json")).then((function(e){return null===e||void 0===e?void 0:e.json()})).then((function(e){if(e){console.log("doorData",e);var t=Object.keys(e.answer).map((function(t){return{user:e.answer[t].username,answer:e.answer[t].answer}}));console.log(t),k(t)}}))}),[s]),Object(l.jsxs)("div",{children:[!s&&Object(l.jsx)(z,{}),s&&Object(l.jsx)(K,{})]})};function I(e){var t=e.id,n=e.door,r=e.admin,s=Object(c.useState)(!1),o=Object(u.a)(s,2),a=o[0],i=o[1],j=Object(c.useState)({}),d=Object(u.a)(j,2),O=d[0],f=d[1];function m(e){return"Rebus1"===O.question?Object(l.jsx)("div",{id:"question",children:Object(l.jsx)("img",{alt:"rebus 1",src:v,width:"100%"})}):"Rebus2"===O.question?Object(l.jsx)("div",{id:"question",children:Object(l.jsx)("img",{alt:"rebus 2",src:x,width:"100%"})}):"Rebus3"===O.question?Object(l.jsx)("div",{id:"question",children:Object(l.jsx)("img",{alt:"rebus 3",src:p,width:"100%"})}):"Rebus4"===O.question?Object(l.jsx)("div",{id:"question",children:Object(l.jsx)("img",{alt:"rebus 4",src:g,width:"100%"})}):Object(l.jsx)("div",{id:"question",children:O.question})}return Object(c.useEffect)((function(){console.log(t),fetch("".concat(h.FIREBASE_URL,"doorsQnA/").concat(t,".json")).then((function(e){return null===e||void 0===e?void 0:e.json()})).then((function(e){if(e){var t=Object.keys(e.qna);f(e.qna[t[0]])}}))}),[t]),Object(l.jsxs)(b,{children:[Object(l.jsxs)("h2",{children:["Luke ",n]}),Object(l.jsx)(m,{}),a&&Object(l.jsx)("div",{children:O.answer}),Object(l.jsx)("button",{onClick:function(){return i(!a)},children:a?"Skjul svar":"Vis svar"}),Object(l.jsxs)("button",{onClick:function(){return console.log(r)},children:["Gi poeng (",r,")"]}),Object(l.jsxs)(F.b,{to:"../admin/".concat(n),children:["Gi poeng (",r,")"]})]},t)}var L=function(){var e=Object(c.useState)([]),t=Object(u.a)(e,2),n=t[0],r=t[1];return Object(c.useEffect)((function(){fetch("".concat(h.FIREBASE_URL,"openedDoors.json")).then((function(e){return null===e||void 0===e?void 0:e.json()})).then((function(e){if(e){console.log(e);var t=Object.values(e).filter((function(e){return e}));t.pop();var n=Object.keys(t).map((function(e){return{question:t[e].question,door:parseInt(e)+1}})).map((function(e){var t=Object.keys(e.question);return{id:e.question[t[0]].id,door:e.door,admin:e.question[t[0]].admin}}));r(n.reverse())}}))}),[]),n.map((function(e){return Object(l.jsx)(I,{id:e.id,door:e.door,admin:e.admin},e.id)}))};var T=function(e){var t=Object(c.useRef)(),n=Object(c.useRef)();return Object(l.jsx)(b,{children:Object(l.jsxs)("form",{className:m.a.form,onSubmit:function(c){c.preventDefault();var r,s={username:t.current.value,password:n.current.value,submittedAt:new Date};try{r=s,fetch("".concat(h.FIREBASE_URL,"users/username.json")).then((function(e){return null===e||void 0===e?void 0:e.json()})).then((function(t){return t&&Object.keys(t).forEach((function(e){var n;if((null===(n=t[e])||void 0===n?void 0:n.username)===r.username)throw new Error("Brukernavnet er opptatt")})),e.onAddedUser(r)})).catch((function(e){return document.getElementById("error").innerHTML=e.message}))}catch(o){console.log(o)}},children:[Object(l.jsx)("h3",{children:"Velg brukernavn og passord"}),Object(l.jsx)("div",{className:m.a.control,children:Object(l.jsx)("input",{type:"text",id:"name",required:!0,ref:t,placeholder:"Brukernavn"})}),Object(l.jsx)("div",{className:m.a.control,children:Object(l.jsx)("input",{type:"password",id:"password",required:!0,ref:n,placeholder:"Passord"})}),Object(l.jsx)("div",{id:"error",children:" "}),Object(l.jsx)("div",{className:m.a.actions,children:Object(l.jsx)("button",{children:"Send inn"})})]})})},U=n(16),D=n.n(U);var C=function(){var e=Object(o.f)();return Object(l.jsxs)("div",{children:[Object(l.jsx)("section",{children:Object(l.jsx)(T,{onAddedUser:function(t){var n;!function(e){var t="".concat(e.password).concat(e.username);fetch("".concat(h.FIREBASE_URL,"users/").concat(t,".json"),{method:"POST",body:JSON.stringify(e),headers:{"Content-Type":"application/json"}})}(t),n={username:t.username,submittedAt:t.submittedAt},fetch("".concat(h.FIREBASE_URL,"users/username.json"),{method:"POST",body:JSON.stringify(n),headers:{"Content-Type":"application/json"}}).then((function(){return e("/takk")}))}})}),Object(l.jsx)(F.b,{to:"/admin",className:D.a.secretlink,children:"."})]})};var P=function(e){var t=Object(c.useRef)(),n=Object(c.useRef)(),r=Object(c.useRef)(),s=Object(c.useRef)();return Object(l.jsx)(b,{children:Object(l.jsxs)("form",{className:m.a.form,onSubmit:function(c){c.preventDefault();var o={id:Math.floor(1e4*Math.random()),question:t.current.value,answer:n.current.value,submittedAt:new Date,username:r.current.value,password:s.current.value};try{e.onAddedQnA(o)}catch(a){console.log(a)}},children:[Object(l.jsx)("h3",{children:"Legg inn en ny luke"}),Object(l.jsx)("div",{className:m.a.control,children:Object(l.jsx)("textarea",{type:"text",id:"question",required:!0,rows:"5",ref:t,placeholder:"Sp\xf8rsm\xe5l"})}),Object(l.jsx)("div",{className:m.a.control,children:Object(l.jsx)("textarea",{type:"text",id:"answer",rows:"5",required:!0,ref:n,placeholder:"Svar"})}),Object(l.jsxs)("div",{className:m.a.control,children:[Object(l.jsx)("input",{type:"text",ref:r,placeholder:"Brukernavn"}),Object(l.jsx)("input",{type:"password",ref:s,placeholder:"Passord"})]}),Object(l.jsx)("div",{id:"error",children:" "}),Object(l.jsx)("div",{className:m.a.actions,children:Object(l.jsx)("button",{children:"Send inn"})})]})})};var J=function(){var e=Object(o.f)();return Object(l.jsx)("div",{children:Object(l.jsx)("section",{children:Object(l.jsx)(P,{onAddedQnA:function(t){var n="".concat(t.password).concat(t.username);fetch("".concat(h.FIREBASE_URL,"users/").concat(n,".json")).then((function(e){return console.log(e),null===e||void 0===e?void 0:e.json()})).then((function(n){if(!n)throw new Error("Brukernavn eller passord er feil");var c;c=t,fetch("".concat(h.FIREBASE_URL,"doorsQnA/").concat(c.id,"/qna.json"),{method:"POST",body:JSON.stringify(c),headers:{"Content-Type":"application/json"}}).then(fetch("".concat(h.FIREBASE_URL,"doorsQ/").concat(c.id,".json"),{method:"POST",body:JSON.stringify({question:c.question,admin:c.username}),headers:{"Content-Type":"application/json"}})).then(fetch("".concat(h.FIREBASE_URL,"doorIds/").concat(c.id,".json"),{method:"POST",body:JSON.stringify(c.id),headers:{"Content-Type":"application/json"}})).then(e("/takk"))})).catch((function(e){alert(e.message)}))}})})})},H=n(5),M=n.n(H);var Q=function(){var e=Object(c.useState)(M.a.hamburger),t=Object(u.a)(e,2),n=t[0],r=t[1],s=Object(c.useState)(M.a.navmenu),o=Object(u.a)(s,2),a=o[0],i=o[1],j=Object(c.useState)(!1),d=Object(u.a)(j,2),b=d[0],h=d[1];function O(){b?(r(M.a.hamburger),i(M.a.navmenu),h(!1)):(r(M.a.hamburger+" "+M.a.active),i(M.a.navmenu+" "+M.a.active),h(!0))}return Object(l.jsx)("header",{children:Object(l.jsxs)("nav",{className:M.a.navbar,children:[Object(l.jsx)(F.b,{className:M.a.navbranding,to:"/",children:"Vitsekalender"}),Object(l.jsxs)("ul",{className:a,children:[Object(l.jsx)("li",{className:M.a.navitem,children:Object(l.jsx)(F.b,{to:"/highscore",onClick:function(){return O()},children:"Highscore"})}),Object(l.jsx)("li",{className:M.a.navitem,children:Object(l.jsx)(F.b,{to:"/",onClick:function(){return O()},children:"Dagens luke"})}),Object(l.jsx)("li",{className:M.a.navitem,children:Object(l.jsx)(F.b,{to:"/tidligere-luker",onClick:function(){return O()},children:"Tidligere luker"})}),Object(l.jsx)("li",{className:M.a.navitem,children:Object(l.jsx)(F.b,{to:"/legg-til-luke",onClick:function(){return O()},children:"Nytt sp\xf8rsm\xe5l"})}),Object(l.jsx)("li",{className:M.a.navitem,children:Object(l.jsx)(F.b,{to:"/ny-bruker",onClick:function(){return O()},children:"Ny bruker"})})]}),Object(l.jsxs)("div",{className:n,onClick:function(){return O()},children:[Object(l.jsx)("span",{className:M.a.bar}),Object(l.jsx)("span",{className:M.a.bar}),Object(l.jsx)("span",{className:M.a.bar})]})]})})};var V=function(){return Object(l.jsxs)("div",{className:i.a.main,id:"main",children:[Object(l.jsx)(Q,{}),Object(l.jsxs)(o.c,{children:[Object(l.jsx)(o.a,{path:"/",exact:!0,element:Object(l.jsx)(y,{})}),Object(l.jsx)(o.a,{path:"/highscore",exact:!0,element:Object(l.jsx)(O,{})}),Object(l.jsx)(o.a,{path:"/takk",element:Object(l.jsx)(A,{})}),Object(l.jsx)(o.a,{path:"/tidligere-luker",element:Object(l.jsx)(L,{})}),Object(l.jsx)(o.a,{path:"/ny-bruker",element:Object(l.jsx)(C,{})}),Object(l.jsx)(o.a,{path:"/legg-til-luke",element:Object(l.jsx)(J,{})}),Object(l.jsx)(o.a,{path:"/admin/:doorParam",element:Object(l.jsx)(B,{})})]})]})};s.a.render(Object(l.jsx)(F.a,{children:Object(l.jsx)(V,{})}),document.getElementById("root"))}],[[23,1,2]]]);
//# sourceMappingURL=main.1b0fa6e3.chunk.js.map